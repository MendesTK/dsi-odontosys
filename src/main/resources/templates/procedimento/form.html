<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="layout :: htmlhead"></head>
<meta charset="UTF-8">
<title>Novo Procedimento</title>
<body>
	<div class="container">
		<nav th:replace="layout :: menu">(menu)</nav>
		<div class="border border-dark">
			<form th:action="@{/procedimento/(form)}" 
				action="#" method="post">
				<div th:object="${procedimento}">
					<input type="hidden" id="txtid" th:field="${procedimento.id}" />
	
					<div class="form-group">
						<label for="txtnome">Nome</label> <input type="text"
							th:field="${procedimento.nome}" class="form-control" id="txtnome"
							placeholder="Nome">
					</div>
	
					<div class="form-group">
						<label for="txtdescricao">Descrição</label>
						<textarea th:field="${procedimento.descricao}" class="form-control"
							id="txtdescricao" rows="3" placeholder="Descrição"></textarea>
					</div>
				</div>
				<div class="card">
					<div class="card-header">Vincluar Dentista</div>
					<div class="card-body" >
						<div class="container" >
							<div class="row">
								<div class="col-sm">
									<select class="form-control" id="slcDentista" th:object="${nvdentistahabilitado}"
										th:field="${nvdentistahabilitado.id}">
										<option th:each="umDent : ${listadentistas}"
											th:value="${umDent.id}" th:text="${umDent.nome}"
											th:selected="${umDent.id == nvdentistahabilitado}"
											></option>
									</select>
								</div>

								<div class="col-sm">
									<button type="submit" name="insertdent" class="btn btn-primary">Inserir
										item</button>
								</div>
							</div>
						</div>
						<br>
					</div>


					<table class="table">
						<thead class="thead-light">
							<tr>
								<th scope="col">Nome</th>
								<th scope="col">CPF</th>
								<th scope="col"></th>
							</tr>
						</thead>
						<tbody>
							<tr scope="row"
								th:each="umdentista, stat : ${procedimento.listaDentistasAutorizados}">
								<input type="hidden"
									th:field="${procedimento.listaDentistasAutorizados[__${stat.index}__].nome}" />
								<input type="hidden"
									th:field="${procedimento.listaDentistasAutorizados[__${stat.index}__].cpf}" />
								<td th:text="${umdentista.nome}"></td>
								<td th:text="${umdentista.cpf}"></td>
								<td>
									<button type="submit" name="removedent"
										th:value="__${stat.index}__" class="btn btn-primary">Remover</button>
								</td>
							</tr>
						</tbody>
					</table>


					<button type="submit" class="btn btn-primary">Enviar</button>
			</form>
		</div>
	</div>
	<div th:include="layout :: footer" id="footer">(footer)</div>

	<script type="text/javascript">
		$("listadentistas").selectize({
			delimiter : ',',
			persist : false,
			create : function(input) {
				return {
					value : input,
					text : input
				}
			}
		});
	</script>

</body>
</html>